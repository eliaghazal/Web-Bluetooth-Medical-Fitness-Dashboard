@model HealthDashboard.Models.LoginViewModel
@{
    ViewData["Title"] = "Login";
}

@* 
    LOGIN PAGE - Simplified for Academic Presentation
    
    Concepts Used (from syllabus):
    - HTML Forms (input, button, labels)
    - CSS/Bootstrap Grid (row, col)
    - Razor syntax (@Model, @ViewData)
    - HTTP POST method for form submission
    
    Self-Study Topics:
    - @Html.AntiForgeryToken() = security token against CSRF attacks
    - Model binding = form fields automatically map to ViewModel
*@

<div class="container auth-page">
    <div class="row justify-content-center">
        <div class="col-md-5">
            
            <!-- Login Card with Gradient Header -->
            <div class="card shadow-lg">
                <div class="card-header text-white text-center">
                    <i class="fas fa-heartbeat fa-2x mb-2"></i>
                    <h3>Welcome Back</h3>
                    <p class="mb-0 opacity-75">Sign in to your Health Dashboard</p>
                </div>
                <div class="card-body p-4">
                    
                    <!-- Login Form -->
                    <form action="/Account/Login" method="post">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="returnUrl" value="@ViewData["ReturnUrl"]" />
                        
                        <!-- Error Messages -->
                        @if (!ViewData.ModelState.IsValid)
                        {
                            <div class="alert alert-danger">
                                <i class="fas fa-exclamation-circle me-2"></i>
                                Invalid email or password. Please try again.
                            </div>
                        }
                        
                        <!-- Email Field -->
                        <div class="mb-4">
                            <label for="Email" class="form-label">
                                <i class="fas fa-envelope me-1 text-primary"></i> Email Address
                            </label>
                            <input type="email" 
                                   name="Email" 
                                   id="Email" 
                                   class="form-control form-control-lg" 
                                   placeholder="you@example.com"
                                   value="@Model?.Email"
                                   required />
                        </div>
                        
                        <!-- Password Field -->
                        <div class="mb-4">
                            <label for="Password" class="form-label">
                                <i class="fas fa-lock me-1 text-primary"></i> Password
                            </label>
                            <input type="password" 
                                   name="Password" 
                                   id="Password" 
                                   class="form-control form-control-lg" 
                                   placeholder="Enter your password"
                                   required />
                        </div>
                        
                        <!-- Remember Me -->
                        <div class="mb-4 form-check">
                            <input type="checkbox" name="RememberMe" id="RememberMe" class="form-check-input" />
                            <label for="RememberMe" class="form-check-label">Remember me on this device</label>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-sign-in-alt me-2"></i> Sign In
                            </button>
                        </div>
                    </form>
                    
                    <hr class="my-4" />
                    
                    <!-- Sign Up Link -->
                    <div class="text-center">
                        <p class="text-muted mb-2">Don't have an account yet?</p>
                        <a href="/Account/Register" class="btn btn-outline-success btn-lg w-100">
                            <i class="fas fa-user-plus me-2"></i> Create Account
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Footer Text -->
            <p class="text-center text-muted mt-4">
                <i class="fas fa-shield-alt me-1"></i> 
                Your data is protected with secure authentication
            </p>
        </div>
    </div>
</div>

<!-- jQuery Form Feedback -->
<script>
    $(document).ready(function() {
        $('form').on('submit', function() {
            $('button[type="submit"]')
                .prop('disabled', true)
                .html('<i class="fas fa-spinner fa-spin me-2"></i> Signing in...');
        });
    });
</script>
